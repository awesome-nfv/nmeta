<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Nmeta : Extensible Traffic Classification on SDN">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="shortcut icon" href="images/favicon.ico"/>
    <title>Nmeta</title>
  </head>

  <body>

  <!-- NAVBAR -->
  <div id="header"></div>
  <div class="navbar-box">
    <div id="nav">
        <ul id="navbar">
          <li><a href="index.html">Welcome</a></li>
          <li><a href="motivation.html">Motivation</a></li>
          <li><a href="install.html">Install</a></li>
          <li>Develop</li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a href="extras.html">Extras</a></li>
        </ul>
    </div>
	<div id="navbreak">
	</div>
    <div id="nav2">
      <ul id="navbar2">
        <li><a href="#" class="black">&nbsp;</a></li>
        <li><a href="#" class="black">&nbsp;</a></li>
        <li><a href="#" class="black">&nbsp;</a></li>
        <li>Contribute</li>
        <li><a href="design.html">Design</a></li>
        <li><a href="https://github.com/mattjhayes/nmeta" target="_blank">Github</a></li>
      </ul>
    </div>
    <div id="navbreak">
	</div>
  </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<h1>
  <a id="nmeta---network-metadata" class="anchor" href="#nmeta---network-metadata" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Contributing
</h1>

<h3>
  <a id="general-configuration" class="anchor" href="#general-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Contents:
</h3>
<p>
  <a href="#How-To-Contribute">How to Contribute</a>
  <br>
  <a href="#Using-Git-Flow">Using Git Flow</a>
  <br>
  <a href="#quality-code">Quality Code</a>
  <br>
  <a href="#logging">Logging</a>
  <br>
  <a href="#Testing">Learning to Love Automated Testing</a>
  <br>
  <a href="#merge-to-master-branch">Merging to Master Branch</a>
  <br>
  <a href="#Updating-the-Website">Updating the Website</a>
  <br>
</p>

<h2>
  <a id="How-To-Contribute" class="anchor" href="#How-To-Contribute" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  How To Contribute
</h2>

<p>Contributors are very welcome. There's certainly a lot of opportunity to make improvements! Here's how to contribute:
  <ul>
    <li>All development is done on the <a href="https://github.com/mattjhayes/nmeta" target="_blank">Github repo</a></li>
    <li>Use the <em>develop</em> branch for development so that the master branch can be kept clean for downloads</li>
    <li>See <a href="https://github.com/mattjhayes/nmeta/issues" target="_blank">Issues</a> for inspiration as to what you can work on</li>
  </ul>
</p>
<h2>
  <a id="Using-Git-Flow" class="anchor" href="#Using-Git-Flow" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Using Git Flow
</h2>

<p>Git flow provides branching strategy and release management over the top of git. To set git flow up, go to the nmeta directory and run:</p>

<pre><code>git flow init
</code></pre>

<p>Accept the defaults and it is now set up with develop branch selected:</p>

<p><img src="images/develop/git-flow.png" alt="git flow init example"></p>

<h3>
  <a id="nmeta---network-metadata" class="anchor" href="#nmeta---network-metadata" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Start a Git Flow Feature
</h3>

<p>To start working on a new feature called FEATURE_NAME (substitute your own feature name) enter:</p>

<pre><code>git flow feature start FEATURE_NAME
</code></pre>

<p>Example, working on a new feature called "Controller-Abstraction-Refactor":</p>

<p><img src="images/develop/git-flow2.png" alt="git flow init example 2"></p>

<p>Git now shows that the new branch is created and selected:</p>

<p><img src="images/develop/git-flow3.png" alt="git flow init example 3"></p>

<p>Use Git to commit code as per usual</p>

<h3>
  <a id="nmeta---network-metadata" class="anchor" href="#nmeta---network-metadata" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Finish a Git Flow Feature
</h3>

<p>When finished with a feature, wrap things up with Git Flow:</p>

<pre><code>git flow feature finish FEATURE_NAME
</code></pre>

<h2>
  <a id="logging" class="anchor" href="#logging" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Logging
</h2>
<p>
  Good logging is important to code development and testing.
</p>
<p>
  All modules initiate their own instance of <em>logger</em> during init, with configuration specified in config.yaml.
</p>
<p>
  Log formats differ for console and syslog formats, but both automatically add the names of the module and function to the event.
</p>

<p>
  Logging should use key=value format where appropriate to simplify analysis of logs with tools such as <a href="https://www.splunk.com/" target="_blank"> Splunk</a>. Example screenshot of analysis of event=*:
</p>
<p>
  <img src="images/develop/splunk-events.png" alt="Splunk events analysis example">
</p>

<p>
  Common keys and values to use in log messages:
</p>
<table>
  <tr>
    <th>
      Attribute
    </th>
    <th>
      Description
    </th>
    <th>
      Values
    </th>
    <th>
      Examples
    </th>
  </tr>
  <tr>
    <td>
      event
    </td>
    <td>
      main indicator as to type of message
    </td>
    <td>
      &nbsp;
    </td>
    <td>
      event=add_flow, event=pi_ipv4
    </td>
  </tr>
  <tr>
    <td>
      ofv
    </td>
    <td>
      OpenFlow version
    </td>
    <td>
      &nbsp;
    </td>
    <td>
      ofv=%s
    </td>
  </tr>
  <tr>
    <td>
      match
    </td>
    <td>
      A flow match object
    </td>
    <td>
      &nbsp;
    </td>
    <td>
      match=%s
    </td>
  </tr>
  <tr>
    <td>
      match_type
    </td>
    <td>
      Granularity of flow match
    </td>
    <td>
      tcp, ip, eth
    </td>
    <td>
      match_type=%s
    </td>
  </tr>
  <tr>
    <td>
      actions
    </td>
    <td>
      Actions to carry out for a flow match
    </td>
    <td>
      &nbsp;
    </td>
    <td>
      actions=%s
    </td>
  </tr>
  <tr>
    <td>
      dpid
    </td>
    <td>
      Datapath Identifier
    </td>
    <td>
      &nbsp;
    </td>
    <td>
      dpid=%s
    </td>
  </tr>
  <tr>
    <td>
      ip_ver
    </td>
    <td>
      IP version
    </td>
    <td>
      4,6
    </td>
    <td>
      ip_ver=4, ip_ver=6
    </td>
  </tr>
</table>

<p>
  TBD: Logging code examples
</p>

<h2>
  <a id="quality-code" class="anchor" href="#quality-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Quality Code
</h2>
<p>
  Python code should (where practical) comply with <a href="https://www.python.org/dev/peps/pep-0008/" target="_blank">PEP8</a> standards.
</p>
<p>
  A good tool for assessing code quality is <a href="http://www.pylint.org/" target="_blank">Pylint</a>. Code doesn't need to be 10/10, there will be some
  things that should be taken under advisement. Use common sense...
</p>

<h2>
  <a id="Testing" class="anchor" href="#Testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Learning to Love Automated Testing
</h2>
<p>Automated tests are slowly being added into the codebase to both improve reliability of the system, and to speed up acceptance of code updates.</p>
<p>Tests use <a href="http://nose.readthedocs.org/en/latest/">nose</a></p>
<p>Tests can be run by running this command in the nmeta directory:</p>

<pre><code>nosetests -v
</code></pre>

<h2>
  <a id="merge-to-master-branch" class="anchor" href="#merge-to-master-branch" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Merging to Master Branch
</h2>
<p>
  Here's a few checks to do before merging code updates to the <em>master</em> branch:
</p>
<ul>
  <li>
    Does the updated code get a reasonable score in <a href="#quality-code">pylint</a>?
  </li>
  <li>
    Does the code pass <a href="#Testing">automated testing</a>?
  </li>
  <li>
    Has the code been run in a test environment?
  </li>
  <li>
    Have logs been examined to ensure no unexpected errors?
  </li>
  <li>
    Has performance data from test environment been examined to ensure no detrimental impact on performance?
  </li>
  <li>
    Are all logging levels in config.yaml set to 'INFO'?
  </li>
</ul>
<p>
  After merging, create a <a href="https://help.github.com/articles/creating-releases/" target="_blank">Github Release</a>, remembering to follow guidelines of <a href="http://semver.org/" target="_blank">semantic versioning</a>.
</p>

<h2>
  <a id="Updating-the-Website" class="anchor" href="#Updating-the-Website" aria-hidden="true"><span class="octicon octicon-link"></span></a>
  Updating the Website
</h2>

<p>The website is in a separate orphan branch called <em>gh-pages</em></p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Nmeta maintained by <a href="https://github.com/mattjhayes" target="_blank">mattjhayes</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

  </body>
</html>
